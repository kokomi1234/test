# config/sentinel.conf
bind 0.0.0.0
port 26379

# sentinel monitor <master-name> <ip> <port> <quorum>
# mymaster 是主节点的别名
# redis-master 是主节点的服务名，docker-compose 会将其解析为对应的 IP
# 6379 是主节点的端口
# 2 表示至少需要 2 个 sentinel 同意才能判断主节点故障并进行故障转移
sentinel monitor mymaster redis-master 6379 2

# 主节点故障后，多长时间内（毫秒）未响应，则认为主观下线
sentinel down-after-milliseconds mymaster 5000

# 故障转移超时时间（毫秒）
sentinel failover-timeout mymaster 10000

# 同一时间可以有多少个从节点对新的主节点进行同步
sentinel parallel-syncs mymaster 1

# 关键配置：启用主机名解析
sentinel resolve-hostnames yes
sentinel announce-hostnames yes